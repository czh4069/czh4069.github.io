<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>2048 - Ê∑±Ëâ≤6x6È≠îÊ≥ïÁâà</title>
<style>
:root {
  --bg: #121217;
  --panel: #1b1b20;
  --tile-bg: #232328;
  --text: #e6e6e9;
  --accent: #ffb259;
  --tile-size: 80px;
  --gap: 10px;
}
body {
  background: var(--bg);
  color: var(--text);
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  margin: 0;
  overflow: hidden;
  user-select: none;
  cursor: none;
  font-family: 'Segoe UI', sans-serif;
}
.panel {
  background: var(--panel);
  border-radius: 12px;
  padding: 20px;
  display: flex;
  flex-direction: column;
  align-items: center;
}
.header {
  width: 100%;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.title {
  font-size: 24px;
  font-weight: bold;
}
.btn {
  background: #2b2b30;
  color: var(--text);
  border: none;
  padding: 10px 16px;
  border-radius: 8px;
  font-size: 14px;
  font-weight: bold;
  transition: 0.15s;
}
.btn:hover {
  background: #3a3a40;
}
.board {
  margin-top: 20px;
  background: #0e0e11;
  border-radius: 10px;
  display: grid;
  grid-template-columns: repeat(6, var(--tile-size));
  grid-template-rows: repeat(6, var(--tile-size));
  gap: var(--gap);
  position: relative;
}
.cell {
  background: var(--tile-bg);
  border-radius: 10px;
  width: var(--tile-size);
  height: var(--tile-size);
}
.tile {
  position: absolute;
  border-radius: 10px;
  font-weight: bold;
  font-size: 22px;
  display: flex;
  justify-content: center;
  align-items: center;
  transition: all 0.15s ease;
}
.tile.v2 { background: #eee4da; color: #776e65; }
.tile.v4 { background: #ede0c8; color: #776e65; }
.tile.v8 { background: #f2b179; }
.tile.v16 { background: #f59563; }
.tile.v32 { background: #f67c5f; }
.tile.v64 { background: #f65e3b; }
.tile.v128 { background: #edcf72; color: #3c2e12; }
.tile.v256 { background: #edcc61; color: #3c2e12; }
.tile.v512 { background: #edc850; color: #3c2e12; }
.tile.v1024 { background: #edc53f; color: #3c2e12; }
.tile.v2048 { background: #edc22e; color: #3c2e12; }
.overlay {
  position: absolute;
  inset: 0;
  display: none;
  align-items: center;
  justify-content: center;
  background: rgba(0, 0, 0, 0.5);
  border-radius: 10px;
}
.modal {
  background: #1f1f23;
  padding: 20px;
  border-radius: 10px;
  text-align: center;
  font-size: 18px;
}

/* Ëá™ÂÆö‰πâÈº†Ê†á */
#cursor {
  position: fixed;
  top: 0;
  left: 0;
  width: 30px;
  height: 30px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.08);
  border: 1px solid rgba(255,255,255,0.3);
  box-shadow: 0 0 10px rgba(255,255,255,0.2);
  pointer-events: none;
  transform: translate(-50%, -50%);
  transition: all 0.15s ease;
  z-index: 9999;
}
#cursor.square {
  border-radius: 6px;
  width: 40px;
  height: 40px;
  background: rgba(255, 200, 100, 0.1);
  border: 1px solid rgba(255, 200, 100, 0.5);
  box-shadow: 0 0 12px rgba(255,200,100,0.4);
}

#easterHint {
  position: fixed;
  right: 10px;
  bottom: 10px;
  color: #ffd36b;
  background: rgba(255,255,255,0.08);
  padding: 6px 10px;
  border-radius: 6px;
  display: none;
  font-size: 13px;
  z-index: 10000;
}
</style>
</head>
<body>
<div class="panel">
  <div class="header">
    <div class="title">2048</div>
    <button class="btn" id="newGame">Êñ∞Ê∏∏Êàè</button>
  </div>
  <div class="board" id="board"></div>
  <div class="overlay" id="overlay"><div class="modal">üéâ ‰Ω†Ëµ¢‰∫ÜÔºÅ</div></div>
</div>
<div id="cursor"></div>
<div id="easterHint">üåà ÂΩ©ËõãÊ®°ÂºèÂ∑≤ÂêØÂä®</div>

<script>
const boardEl = document.getElementById("board");
const overlay = document.getElementById("overlay");
const newBtn = document.getElementById("newGame");
const cursor = document.getElementById("cursor");
const hint = document.getElementById("easterHint");

let grid = [];
const size = 6;
let score = 0;
let easterClicks = 0;
let autoMode = false;

// ÂàùÂßãÂåñ
function init() {
  overlay.style.display = "none";
  grid = Array(size).fill(0).map(()=>Array(size).fill(0));
  addTile();
  addTile();
  render();
}

function addTile() {
  const empty = [];
  for(let i=0;i<size;i++)
    for(let j=0;j<size;j++)
      if(!grid[i][j]) empty.push([i,j]);
  if(empty.length>0){
    const [x,y] = empty[Math.floor(Math.random()*empty.length)];
    grid[x][y] = Math.random()<0.9?2:4;
  }
}

function render() {
  boardEl.innerHTML = "";
  for(let i=0;i<size;i++){
    for(let j=0;j<size;j++){
      const cell = document.createElement("div");
      cell.className = "cell";
      boardEl.appendChild(cell);
      const val = grid[i][j];
      if(val){
        const tile = document.createElement("div");
        tile.className = `tile v${val}`;
        tile.textContent = val;
        tile.style.left = `calc(${j} * (var(--tile-size) + var(--gap)) + var(--gap))`;
        tile.style.top = `calc(${i} * (var(--tile-size) + var(--gap)) + var(--gap))`;
        tile.style.width = "var(--tile-size)";
        tile.style.height = "var(--tile-size)";
        boardEl.appendChild(tile);
      }
    }
  }
  checkWin();
}

function move(dir){
  let moved = false;
  function slide(row){
    row = row.filter(v=>v);
    for(let i=0;i<row.length-1;i++){
      if(row[i]===row[i+1]){
        row[i]*=2;
        row[i+1]=0;
      }
    }
    return row.filter(v=>v);
  }
  if(dir==="left"){
    for(let i=0;i<size;i++){
      let newRow = slide(grid[i]);
      while(newRow.length<size) newRow.push(0);
      if(newRow.toString()!=grid[i].toString()){grid[i]=newRow;moved=true;}
    }
  } else if(dir==="right"){
    for(let i=0;i<size;i++){
      let row = grid[i].slice().reverse();
      let newRow = slide(row);
      while(newRow.length<size) newRow.push(0);
      newRow.reverse();
      if(newRow.toString()!=grid[i].toString()){grid[i]=newRow;moved=true;}
    }
  } else if(dir==="up"){
    for(let j=0;j<size;j++){
      let col = [];
      for(let i=0;i<size;i++) col.push(grid[i][j]);
      let newCol = slide(col);
      while(newCol.length<size) newCol.push(0);
      for(let i=0;i<size;i++) if(grid[i][j]!=newCol[i]){grid[i][j]=newCol[i];moved=true;}
    }
  } else if(dir==="down"){
    for(let j=0;j<size;j++){
      let col = [];
      for(let i=0;i<size;i++) col.push(grid[i][j]);
      col.reverse();
      let newCol = slide(col);
      while(newCol.length<size) newCol.push(0);
      newCol.reverse();
      for(let i=0;i<size;i++) if(grid[i][j]!=newCol[i]){grid[i][j]=newCol[i];moved=true;}
    }
  }
  if(moved) addTile();
  render();
}

function checkWin(){
  for(let i=0;i<size;i++){
    for(let j=0;j<size;j++){
      if(grid[i][j]===2048){
        overlay.style.display = "flex";
        if(autoMode){
          setTimeout(()=>{hint.textContent="üåà Ëá™Âä®ÈÄöÂÖ≥ÂÆåÊàêÔºÅ";},1000);
        }
        return true;
      }
    }
  }
  return false;
}

document.addEventListener("keydown",e=>{
  if(autoMode) return;
  if(e.key==="ArrowLeft") move("left");
  else if(e.key==="ArrowRight") move("right");
  else if(e.key==="ArrowUp") move("up");
  else if(e.key==="ArrowDown") move("down");
});

// Èº†Ê†áÊéßÂà∂
document.addEventListener("mousemove",e=>{
  cursor.style.left = e.clientX+"px";
  cursor.style.top = e.clientY+"px";
});
newBtn.addEventListener("mouseenter",()=>cursor.classList.add("square"));
newBtn.addEventListener("mouseleave",()=>cursor.classList.remove("square"));

// ÂΩ©ËõãÔºöËøûÁª≠ÁÇπÂáª10Ê¨°‚ÄúÊñ∞Ê∏∏Êàè‚Äù
newBtn.addEventListener("click",()=>{
  easterClicks++;
  if(easterClicks>=10){
    autoMode=true;
    hint.style.display="block";
    autoRun();
  } else {
    init();
  }
  setTimeout(()=>{easterClicks=0;},3000);
});

// Ëá™Âä®ÈÄöÂÖ≥Ê®°Âºè
async function autoRun(){
  let dirs=["left","right","up","down"];
  let attempts=0;
  while(!checkWin() && attempts<20000){
    move(dirs[Math.floor(Math.random()*4)]);
    await new Promise(r=>setTimeout(r,30));
    attempts++;
  }
}

init();
</script>
</body>
</html>