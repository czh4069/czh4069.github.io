<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mitaiair - User Center</title>
    <style>
        :root { --primary: #000; --bg: #f4f7f6; --text: #333; --danger: #dc3545; --warning: #ffc107; }
        body { margin: 0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; background: var(--bg); color: var(--text); display: flex; justify-content: center; align-items: center; min-height: 100vh; }
        .container { width: 100%; max-width: 500px; background: white; padding: 35px; border-radius: 24px; box-shadow: 0 20px 40px rgba(0,0,0,0.06); box-sizing: border-box; animation: fadeIn 0.8s ease; position: relative; overflow: hidden;}
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .hidden { display: none !important; }

        /* --- Mitaiair 核心动画 --- */
        .intro-box { display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 200px; }
        .stroke-wrapper { transition: transform 1s cubic-bezier(0.4, 0, 0.2, 1); transform: translateY(30px); }
        .stroke-wrapper.moved { transform: translateY(-10px); } /* 动画结束后上移 */

        .stroke-text { width: 100%; max-width: 400px; height: auto; }
        .stroke-text text { 
            fill: none; stroke: #000; stroke-width: 1.5; stroke-linecap: round; 
            stroke-dasharray: 2000; stroke-dashoffset: 2000;
            font-family: "Apple Chancery", cursive; font-size: 60px;
            animation: drawBrand 6s ease-in-out forwards;
        }
        @keyframes drawBrand { to { stroke-dashoffset: 0; } }

        .slogan { 
            opacity: 0; transform: translateY(10px); 
            transition: all 1s ease 0.5s; 
            font-size: 16px; color: #888; font-weight: 300; letter-spacing: 2px;
            margin-top: 10px;
        }
        .slogan.show { opacity: 1; transform: translateY(0); }

        /* UI 元素 */
        input { width: 100%; padding: 14px; margin: 10px 0; border: 1px solid #eee; border-radius: 12px; box-sizing: border-box; font-size: 16px; background: #f9f9f9; }
        button { width: 100%; padding: 14px; margin-top: 10px; background: #000; color: white; border: none; border-radius: 12px; cursor: pointer; font-size: 16px; transition: 0.3s; }
        button:hover { opacity: 0.8; }
        button.secondary { background: #f0f0f2; color: #333; }
        .list-section { background: #f9f9fb; border-radius: 12px; padding: 15px; margin-top: 15px; max-height: 200px; overflow-y: auto; border: 1px solid #efefef; }
        .item { display: flex; justify-content: space-between; align-items: center; padding: 8px; border-bottom: 1px solid #eee; font-size: 13px; }
    </style>
</head>
<body>

<div id="screen-intro" class="container">
    <div class="intro-box">
        <div id="brand-move" class="stroke-wrapper">
            <svg class="stroke-text" viewBox="0 0 400 100">
                <text x="50%" y="65%" text-anchor="middle">mitaiair</text>
            </svg>
        </div>
        <div id="slogan-text" class="slogan">你的下一代用户中心</div>
    </div>
    <button id="start-btn" class="hidden" onclick="showScreen('screen-setup-1')">开始探索</button>
</div>

<div id="screen-setup-1" class="container hidden">
    <h2>初始化管理员</h2>
    <input type="text" id="set-admin-u" placeholder="管理员账号">
    <input type="password" id="set-admin-p" placeholder="管理密码">
    <button onclick="saveAdmin()">下一步</button>
</div>

<div id="screen-login" class="container hidden">
    <h2 style="text-align:center;">登录 mitaiair</h2>
    <input type="text" id="l-u" placeholder="账号">
    <input type="password" id="l-p" placeholder="密码">
    <button onclick="doLogin()">继续</button>
    <button class="secondary" onclick="showScreen('screen-reg')">注册</button>
</div>

<div id="screen-admin" class="container hidden" style="max-width:600px;">
    <h3>系统管理</h3>
    <div id="adm-user-list" class="list-section"></div>
    <div id="adm-black-list" class="list-section"></div>
    <button class="secondary" onclick="location.reload()">退出</button>
</div>

<script>
    let db = { 
        initialized: localStorage.getItem('init') === 'true',
        users: JSON.parse(localStorage.getItem('users') || '[]'),
        blacklist: JSON.parse(localStorage.getItem('blacklist') || '[]')
    };

    // --- 启动动画逻辑 ---
    window.onload = () => {
        if(!db.initialized) {
            // 6秒写完，开始触发位移
            setTimeout(() => {
                document.getElementById('brand-move').classList.add('moved');
                document.getElementById('slogan-text').classList.add('show');
                setTimeout(() => {
                    document.getElementById('start-btn').classList.remove('hidden');
                }, 1000);
            }, 6000);
        } else {
            showScreen('screen-login');
        }
    };

    function showScreen(id) {
        document.querySelectorAll('.container').forEach(c => c.classList.add('hidden'));
        document.getElementById(id).classList.remove('hidden');
        if(id === 'screen-admin') renderAdmin();
    }

    // 后续管理逻辑与之前保持一致...
    function saveAdmin() {
        let u = document.getElementById('set-admin-u').value;
        let p = document.getElementById('set-admin-p').value;
        if(!u || !p) return alert('必填');
        db.users.push({ username: u, password: p, role: 'admin', banned: false });
        localStorage.setItem('users', JSON.stringify(db.users));
        localStorage.setItem('init', 'true');
        location.reload();
    }

    function doLogin() {
        let u = document.getElementById('l-u').value, p = document.getElementById('l-p').value;
        let user = db.users.find(x => x.username === u && x.password === p);
        if(!user) return alert('错误');
        if(user.role === 'admin') showScreen('screen-admin');
        else alert('登录成功');
    }

    function renderAdmin() {
        let uL = document.getElementById('adm-user-list'), bL = document.getElementById('adm-black-list');
        uL.innerHTML = db.users.map(u => `<div class="item">${u.username} <button onclick="deleteUser('${u.username}')">永久删除</button></div>`).join('');
        bL.innerHTML = db.blacklist.map(b => `<div class="item">${b} <button onclick="removeFromBlacklist('${b}')">恢复</button></div>`).join('');
    }

    function deleteUser(u) {
        let user = db.users.find(x=>x.username===u);
        if(user) db.blacklist.push(user.username);
        db.users = db.users.filter(x=>x.username!==u);
        saveDB(); renderAdmin();
    }

    function removeFromBlacklist(v) { db.blacklist = db.blacklist.filter(x => x !== v); saveDB(); renderAdmin(); }
    function saveDB() { localStorage.setItem('users', JSON.stringify(db.users)); localStorage.setItem('blacklist', JSON.stringify(db.blacklist)); }
</script>
</body>
</html>
